---
date: "2019-08-14"
title: "Connect to the API from React"
categories:
  - Serverless
---

![](../2019-08-12/315.jpg)

### Overview

This is the third post in a three-part series that shows you how to install 
and configure a serverless web app on AWS using AWS Amplify and AppSync 
for the backend and Create React App for the frontend.

### Configuring your React app:

To connect to the new API, we first need to configure our React project with our Amplify project 
credentials. In your `src` folder there is a file called `aws-exports.js`.
This file holds all of the information our local project needs to know about our cloud resources.

As I mentioned in my previous post, this file should be added to a `.gitignore` file, so if you haven't done so already,
go ahead and run the following command from your terminal:

```shell
$ echo "aws-exports.js" >> .gitignore
```

To configure the React app, open `src/app.js` &amp; add the following lines:

```js
import { withAuthenticator } from 'aws-amplify-react';

import Amplify from 'aws-amplify';

import config from 'aws-exports';

Amplify.configure(config);
```

The last line tells Amplify to use the `aws-exports.js` file to connect to the correct backend API.

You'll notice however that we have some imports that have to do with authentication.

```js
import { withAuthenticator } from 'aws-amplify-react';
```

### withAuthenticator HOC

`withAuthenticator` is a helper function provided by Amplify so we can use the out-of-the-box solution that 
AWS provides us with for auth services.

The `App.js` file should now look something like this:

```js
import React from 'react';
import logo from './logo.svg';
import './App.css'

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <img src={logo} className="App-logo" alt="logo" />
        <h1 className="App-title">Welcome to React</h1>
      </header>
      <p className="App-intro">
        To get started, edit <code>src/App.js</code> and save to reload.
      </p>
    </div>
  );
}

export default App
```

What we'll need to do now is change that last line and paste the line below:

```js
export default withAuthenticator(App);
```

To test if everything works as intended, we can run `yarn start` or `npm start` 
and see if we are presented with the default AWS login UI.

![](./amplify-login.png)

In order for us to use our app we now have to register a new user to our API, 
by clicking the 'Create Account' link at the bottom. 

Once we're done registering, AWS will send a confirmation link to the email address we registered.
After that, we are going to be able to login and see the React app in all its glory!

Congratulations! You have now successfully connected to the API from your React app.

Stay tuned for the next part of this series that will take you through querying data from our React App using [React Hooks](https://reactjs.org/docs/hooks-intro.html).